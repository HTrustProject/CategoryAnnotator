<html>
<head>
<title>
Test getElementsAtPoint
</title>

<script type="text/javascript" src="lib/jquery-1.7.1.min.js"></script>
<style>

#text{
width: 500px;
}

#bubble{
    background-color: #ccc;
    width: 100px;
    height: 80px;
    position: absolute;
    top: 50px;
    left: 100px;
    z-index: -1;
}

#bigBubble{
    background-color: #aaa;
    width: 200px;
    height: 80px;
    position: absolute;
    top: 70px;
    left: 80px;
    z-index: -2;
}

.border{
	border: 3px solid #000;
}
</style>



<script type="text/javascript">
$(document).ready(function(){

	$("#text").mousemove(function(e){
		
		var divs = $(".bg");
		divs.each(function(){
			$(this).removeClass("border");		
		});
		
		var x = e.pageX;
    var y = e.pageY;
    var allElements = getAllElementsAtPoint(x,y);
		
		for (i in allElements){
			console.log(allElements[i]);
			// add css class to all divs (border class)
			allElements[i].addClass("border");		
		}

	});
});

var getAllElementsAtPoint = function(x,y){
    
	// get all divs
	var divs = $(".bg");

	var elements = [];

	divs.each(function(){
		var t = $(this).position().top;
		var l = $(this).position().left;
		var w = $(this).width();
		var h = $(this).height();	
		//console.log("top: " + t + " left: " + l + " height: " + h + " width: " + w);
		if (x >= l && x <= (l + w) && y >= t && y <= (t + h) ){
			elements.push($(this));
		}
	});

	return elements;
};

</script>
</head>
<body>
<div id="text">
Das Jüdische Museum Berlin ist das größte jüdische Museum Europas. Es zeigt dem Besucher zwei Jahrtausende deutsch-jüdische Geschichte, die Hoch- und Tiefpunkte der Beziehungen zwischen Juden und Nichtjuden in Deutschland. Das Museum beherbergt eine Dauerausstellung, mehrere Wechselausstellungen, Archive und eine Bibliothek. Das Museumsgebäude in Kreuzberg verbindet den barocken Altbau des Kollegienhauses mit einem Neubau. Dieser zickzackförmige Bau geht auf einen Entwurf des amerikanischen Architekten Daniel Libeskind zurück. Werner Michael Blumenthal ist der Direktor. Die Museumseröffnung fand 2001 statt. Es gehört zu den meistbesuchten Museen Berlins
</div>

<div id="bubble" class="bg">
</div>

<div id="bigBubble" class="bg">
</div>
</body>
</html>



